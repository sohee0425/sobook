<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<th:block layout:fragment="content">
	<div class="container mt-4">
		<div class="row">
			<div class="col-3">
        <a class="link-offset-2  link-underline-success" href="/member/mypage">
          <th:block th:replace= "~{member/mypage_menu :: menu}"></th:block>
      </div>
			
		
		<div class="col-9">
      <!-- 목록 -->
			<div class="text-center mb-3">
        <h3 class="mt-3 mb-4 text-center">리뷰 작성</h3>    
      </div>
      <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th scope="col" style="width: 10%; text-align: center;">주문번호</th>
                <th scope="col" style="width: 15%; text-align: center;">주문일</th>
                <th scope="col" style="width: 20%; text-align: center;">상품이미지</th>
                <th scope="col" style="width: 15%; text-align: center;">상품이름</th>
                <th scope="col" style="width: 15%; text-align: center;">비고</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each= "item : ${review_list}">
                <td class="text-center">
                  [[${item.ord_code}]] <br> 
                </td>
                <td class="text-center"> [[${#temporals.format(item.ord_regdate, 'yyyy-MM-dd')}]]</td>
                <td class="text-center">
                  <a th:href="|/order/pro_perinfo?pro_code=${item['pro_code']}#tabs-2|">

                  <img style="width: 100px;height: 100px;" th:src="${'/order/image_display?dateFolderName=' + item.pro_up_folder + '&fileName=s_' + item.pro_img}">
                  </a>
                </td>
                <td class="text-center">
                  [[${item['pro_name']}]] <br>
                  <!-- <span style="color: red;">배송</span> -->
                </td>
                <td class="text-center"><button type="button" name="btn_review_write" th:data-pro_code="${item['pro_code']}" class="btn btn-outline-success">상품평쓰기</button></td>
              </tr>
            </tbody>        
          </table>
        </div>

        <div class="text-center mb-3">
          <h3 class="mt-3 mb-4 text-center">리뷰작성목록@@</h3>    
        </div>
        <div>
          <div class="row">
            <div class="col-sm-6 mb-3 mb-sm-0">
              <div class="card">
                <div class="card-body">
                  
                  <h5 class="card-title">Special title treatment</h5>
                  <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                  <a href="#" class="btn btn-primary">Go somewhere</a>
                </div>
              </div>
            </div>
          </div>
                      
          </div>
          <tbody>
            <tr th:each="item : ${my_review_list}">
              <td class="text-center"> [[${item.rev_code}]] </td>
              <td class="text-center"> [[${#temporals.format(item.rev_date, 'yyyy-MM-dd')}]] </td>
              <td class="text-center"> [[${item.pro_name}]] </td>
              <td class="text-center"> [[${item.rev_content}]] </td>
              <td class="text-center">
                <a th:href="|/review/review_info/${item.rev_code}|" class="btn btn-outline-primary">수정</a>
                <button type="button" th:data-rev_code="${item.rev_code}" class="btn btn-outline-danger btn-delete">삭제</button>
              </td>
            </tr>
          </tbody>
          
          
      

      <!-- 페이징 -->
      <!-- <div class="row">
        <div class="col"> -->
          <div class="card-footer clearfix">
            <nav aria-label="Page navigation example">
              <ul class="pagination justify-content-center">
              <!-- 이전표시여부 Previous  pageMaker.getPrev() -->
              <th:block th:if="${pageMaker.prev}">
                <li class="page-item">
                  <a class="page-link" th:href="|/order/review_manage${pageMaker.makeSearch(pageMaker.startPage - 1)}|">Previous</a>
                </li>
              </th:block>
                <!--  페이지번호 출력.  1  2  3  4  5 -->
                <th:block th:each="num : ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
                <li class="page-item" th:classappend="${pageMaker.cri.page == num ? 'active' : ''}">
                  <a class="page-link" th:href="|/order/review_manage${pageMaker.makeSearch(num)}|" th:text="${num}"></a>
                </li>        
                </th:block>
              
              <!--  다음표시여부 Next -->
              <th:block th:if="${pageMaker.next}">
                <li class="page-item">
                  <a class="page-link" th:href="|/order/review_manage${pageMaker.makeSearch(pageMaker.endPage + 1)}|">Next</a>
                </li>
              </th:block>
              </ul>
            </nav>
          </div>
        <!-- </div>
      </div> -->
		</div>
	</div>	
</div>

  <script>
    $(document).ready(function() {
      // name="btn_review_write"

      // 상품평 이벤트
      $("button[name='btn_review_write']").on("click", function() {
        let pro_code = $(this).data("pro_code");

        // console.log("상품코드", pro_code);

        location.href = `/order/pro_perinfo?pro_code=${pro_code}#tabs-2`;
      });
    });

  </script>
</th:block>
</html>